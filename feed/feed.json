{
	"version": "https://jsonfeed.org/version/1.1",
	"title": "Notes",
	"language": "ru",
	"home_page_url": "https://asmalcev.github.io/notes/notes",
	"feed_url": "https://asmalcev.github.io/notes/feed/feed.json",
	"description": "",
	"author": {
		"name": "asmalcev",
		"url": "https://asmalcev.github.io/notes"
	},
	"items": [
		{
			"id": "https://asmalcev.github.io/notes/blog/view-transition/",
			"url": "https://asmalcev.github.io/notes/blog/view-transition/",
			"title": "view-transition уже на сайте?",
			"content_html": "<h2 id=\"kak-dobavit\" tabindex=\"-1\">Как добавить <a class=\"header-anchor\" href=\"https://asmalcev.github.io/notes/blog/view-transition/\">#</a></h2>\n<p>Чтобы включить <code>view-transition</code>, прежде всего нужно указать at-rule на каждой странице, где эта возможность будет использоваться:</p>\n<pre class=\"language-css\" tabindex=\"0\"><code class=\"language-css\"><span class=\"token atrule\"><span class=\"token rule\">@view-transition</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">navigation</span><span class=\"token punctuation\">:</span> auto<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Затем для получения базовой анимации &quot;перехода&quot; элемента с одной страницы в элемент на другой необходимо указать этим элементам css-свойство <code>view-transition-name</code> с одинаковым значением, например, если это заголовок, то:</p>\n<pre class=\"language-css\" tabindex=\"0\"><code class=\"language-css\"><span class=\"token selector\">h1</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">view-transition-name</span><span class=\"token punctuation\">:</span> title<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Важное условие заключается в том, что значения <code>view-transition-name</code> должны быть уникальными на каждой странице. В случае с блогом, где в ленте записей может быть несколько ссылок на каждый отдельный пост появляется задача сгенировать уникальные значения для каждого поста.</p>\n<p>Для 11ty можно добавить фильтр Nunjucks, который будет генерировать хэш на основе переданной в него строки — именно это и будет уникальный идентифкатор поста:</p>\n<pre class=\"language-js\" tabindex=\"0\"><code class=\"language-js\">eleventyConfig<span class=\"token punctuation\">.</span><span class=\"token function\">addFilter</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"generateHashId\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">content</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">vtn</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>crypto<span class=\"token punctuation\">.</span><span class=\"token function\">createHash</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"md5\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span>content<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">digest</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hex\"</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p><code>vtn</code> в начале нужно, т.к. хэш необязательно сгенерируется с первой буквой, а согласно правилам названий <code>view-transition-name</code>, имя должно начинаться именно с буквы (аналогично названиям переменных в js). А <code>vtn</code> я взял по первым буквам css-свойства</p>\n<p>Использовать этот фильтр можно так:</p>\n<pre class=\"language-html\" tabindex=\"0\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span>\n  <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token selector\">view-transition-name:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> title | generateHashId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">\"</span></span></span>\n<span class=\"token punctuation\">></span></span>\n  view-transition уже на сайте?\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span></code></pre>\n<h2 id=\"podderzhka-v-brauzerah\" tabindex=\"-1\">Поддержка в браузерах <a class=\"header-anchor\" href=\"https://asmalcev.github.io/notes/blog/view-transition/\">#</a></h2>\n<p><baseline-status featureId=\"view-transitions\"></baseline-status></p>\n",
			"date_published": "2025-03-13T00:00:00Z"
		}
		
	]
}
