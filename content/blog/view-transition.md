---
title: view-transition уже на сайте?
date: 2025-03-13
description: Как добавить view-transition для заголовков
---

## Как добавить

Чтобы включить `view-transition`, прежде всего нужно указать at-rule на каждой странице, где эта возможность будет использоваться:
```css
@view-transition {
  navigation: auto;
}
```

Затем для получения базовой анимации "перехода" элемента с одной страницы в элемент на другой необходимо указать этим элементам css-свойство `view-transition-name` с одинаковым значением, например, если это заголовок, то:
```css
h1 {
  view-transition-name: title;
}
```

Важное условие заключается в том, что значения `view-transition-name` должны быть уникальными на каждой странице. В случае с блогом, где в ленте записей может быть несколько ссылок на каждый отдельный пост появляется задача сгенировать уникальные значения для каждого поста.

Для 11ty можно добавить фильтр Nunjucks, который будет генерировать хэш на основе переданной в него строки — именно это и будет уникальный идентифкатор поста:
```js
eleventyConfig.addFilter("generateHashId", (content) => {
  return `vtn${crypto.createHash("md5").update(content).digest("hex")}`;
});
```
`vtn` в начале нужно, т.к. хэш необязательно сгенерируется с первой буквой, а согласно правилам названий `view-transition-name`, имя должно начинаться именно с буквы (аналогично названиям переменных в js). А `vtn` я взял по первым буквам css-свойства

Использовать этот фильтр можно так:
```html
<h1
  style="view-transition-name: {{ '{{' }} title | generateHashId {{ '}}' }}"
>
  {{ title }}
</h1>
```

## Поддержка в браузерах

<baseline-status featureId="view-transitions"></baseline-status>
